(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{55:(e,s,a)=>{Promise.resolve().then(a.bind(a,8007))},8007:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>p});var r=a(5155),t=a(2115),l=a(5695),i=a(4983),n=a(7168),o=a(9852),c=a(6220),d=a(8482),u=a(1135),m=a(4416),h=a(8883),g=a(3999),x=a(1204);function p(){let[e,s]=(0,t.useState)(""),[a,p]=(0,t.useState)(""),[y,b]=(0,t.useState)(null),[v,w]=(0,t.useState)(null),[f,N]=(0,t.useState)(!1),j=(0,l.useRouter)(),C=async s=>{s.preventDefault(),N(!0),b(null);try{let s=(0,x.hV)();if(console.log("Supabase config validation:",s),!s.isValid){b("Configuration error: Supabase keys are not valid. Please contact the administrator."),N(!1);return}let{data:r,error:t}=await i.ND.auth.signInWithPassword({email:e.trim(),password:a});if(t){let e=t.message||"",s=e.toLowerCase();s.includes("confirm")||s.includes("verify")?b("Email not confirmed. Please confirm your email or resend the verification email below."):s.includes("invalid login")||s.includes("invalid")||s.includes("password")?b("Invalid credentials. If you just signed up, confirm your email first. Otherwise you can reset your password below."):b(e),N(!1)}else{let{data:e}=await i.ND.auth.getSession();(null==e?void 0:e.session)?j.push((0,g.a)("/")):(b("Login failed. Please try again."),N(!1))}}catch(e){console.error("Login error:",e),b("Unexpected error: ".concat(e instanceof Error?e.message:"Unknown error")),N(!1)}},S=async()=>{try{if(b(null),w(null),!e)return void b("Please enter your email to reset password.");let s=(0,x.M3)(),{error:a}=await i.ND.auth.resetPasswordForEmail(e,{redirectTo:s});if(a)throw a;w("Password reset email sent. Check your inbox to continue.")}catch(e){b((null==e?void 0:e.message)||"Failed to send password reset email.")}},k=async()=>{N(!0),b(null);let e=(0,x.M3)();console.log("Google OAuth redirect URL:",e);try{let{data:s,error:a}=await i.ND.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,queryParams:{access_type:"offline",prompt:"consent"}}});if(a)throw a;console.log("Google OAuth initiated successfully"),console.log("OAuth response:",s)}catch(a){let s=(null==a?void 0:a.message)||"OAuth error";console.error("Google OAuth error:",a),s.includes("Invalid redirect URI")?b("Configuration error: Invalid redirect URI. Please set the exact callback in Supabase: "+e):s.includes("code")&&s.includes("verifier")?b("Session error: PKCE parameters missing. Please clear cookies and try again, or ensure PKCE flow is enabled."):b("Google sign-in error: ".concat(s)),N(!1)}};return(0,r.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-black",children:(0,r.jsxs)(d.Zp,{className:"w-full max-w-md bg-gray-900 border-gray-700 relative",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{j.push((0,g.a)("/"))},className:"absolute top-2 right-2 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:(0,r.jsx)(m.A,{className:"h-5 w-5"})}),(0,r.jsxs)(d.aR,{className:"space-y-1",children:[(0,r.jsx)(d.ZB,{className:"text-2xl font-bold text-center text-white",children:"Access FF"}),(0,r.jsx)(d.BT,{className:"text-center text-gray-400",children:"Enter your credentials to access your account"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"email",className:"text-white",children:"Email address"}),(0,r.jsx)(o.p,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>s(e.target.value),placeholder:"you@example.com",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"password",className:"text-white",children:"Password"}),(0,r.jsx)(o.p,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:e=>p(e.target.value),placeholder:"••••••••",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),y&&(0,r.jsx)("div",{className:"text-sm text-red-400 bg-red-900/20 p-3 rounded-md border border-red-800",children:y}),v&&(0,r.jsx)("div",{className:"text-sm text-green-400 bg-green-900/20 p-3 rounded-md border border-green-800",children:v}),(0,r.jsx)(n.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:f,children:f?"Signing In...":"Sign In"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(n.$,{type:"button",variant:"outline",className:"w-full border-gray-600",onClick:S,disabled:f,children:"Reset password"})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)(u.w,{className:"w-full bg-gray-700"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-gray-900 px-2 text-gray-400",children:"Or continue with"})})]}),(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)(n.$,{variant:"outline",onClick:k,disabled:f,className:"w-full border-gray-600 text-black hover:text-white hover:bg-gray-800 transition-colors",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Sign In with Google"]})}),(0,r.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Don't have an account?"," ",(0,r.jsx)("a",{href:(0,g.a)("/signup"),className:"font-medium text-blue-400 hover:text-blue-300 underline",children:"Sign Up"})]})]})]})})}}},e=>{e.O(0,[277,192,771,441,964,358],()=>e(e.s=55)),_N_E=e.O()}]);