(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{1204:(e,o,n)=>{"use strict";n.d(o,{$W:()=>t,M3:()=>i,hV:()=>s});var a=n(9509);let t={supabase:{url:"https://yhxdyndkdhhnuginaekn.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloeGR5bmRrZGhobnVnaW5hZWtuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3MTYxMTgsImV4cCI6MjA2NjI5MjExOH0.-3qFN_HEZx7i1rGhpaZg9edxoSRDgUkPzDYfrPNiIqI"},railway:{webhookUrl:a.env.NEXT_PUBLIC_RAILWAY_WEBHOOK_URL||"https://ffaiagent-n8n-production.up.railway.app/webhook/analyze-stocks"},alphaVantage:{apiKey:"UVJUR5P1SEQ00P2P",baseUrl:"https://www.alphavantage.co/query"},app:{url:window.location.origin,name:"Financial Feeling",description:"AI-powered financial analysis and trading insights",maxAssetsPerUser:Number(a.env.NEXT_PUBLIC_MAX_ASSETS_PER_USER||2),twelveDataApiKey:"4b4a29e7548d45caa547dea9a78e0157"},oauth:{redirectUrl:(()=>{{let e=window.location.origin;return"".concat(e).concat("","/auth/callback")}})(),redirectUrls:{development:"http://localhost:3000/auth/callback",production:"https://www.financialfeeling.com/auth/callback"}}};function i(){return t.oauth.redirectUrl}function s(){let e=t.supabase.url,o=t.supabase.anonKey,n=!e||"https://your-project.supabase.co"===e||e.includes("your-project"),a=!o||"your-anon-key"===o||o.includes("your-anon-key"),i=o&&3===o.split(".").length,s=o&&o.length>50,r=e&&o&&!n&&!a&&i&&s;return r||console.warn("⚠️ Supabase configuration validation failed:",{hasUrl:!!e,hasKey:!!o,isExampleUrl:n,isExampleKey:a,isValidJWTFormat:i,isValidLength:s}),{isValid:r,url:e,keyLength:o?o.length:0,isExampleUrl:n,isExampleKey:a,isValidJWTFormat:i,isValidLength:s,issues:{exampleUrl:n,exampleKey:a,invalidJWT:!i,invalidLength:!s}}}},1760:e=>{function o(e){var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}o.keys=()=>[],o.resolve=o,o.id=1760,e.exports=o},3999:(e,o,n)=>{"use strict";n.d(o,{a:()=>s,cn:()=>i});var a=n(2596),t=n(9688);function i(){for(var e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];return(0,t.QP)((0,a.$)(o))}function s(e){let o=e.startsWith("/")?e.slice(1):e;return"www.financialfeeling.com"===window.location.hostname||window.location.hostname,"/".concat(o)}},5650:(e,o,n)=>{"use strict";n.r(o),n.d(o,{default:()=>c});var a=n(5155),t=n(2115),i=n(5695),s=n(2354),r=n(3999),l=n(1204);function c(){let e=(0,i.useRouter)(),[o,n]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{console.log("Auth callback page loaded"),console.log("Current URL:",window.location.href),console.log("URL search params:",window.location.search),(async()=>{try{let o=(0,s.UU)(l.$W.supabase.url,l.$W.supabase.anonKey,{auth:{flowType:"pkce"}}),a=new URLSearchParams(window.location.search),t=a.get("code"),i=a.get("error");if(i){console.error("OAuth error:",i),n("Authentication error: ".concat(i)),setTimeout(()=>{e.push((0,r.a)("/login"))},3e3);return}if(t){console.log("OAuth code received:",t);let{data:a,error:i}=await o.auth.exchangeCodeForSession(t);if(i){console.error("Error exchanging code for session:",i),n("Session error: ".concat(i.message)),setTimeout(()=>{e.push((0,r.a)("/login"))},3e3);return}if(a.session){console.log("Session created successfully:",a.session.user.email);let{data:{session:t}}=await o.auth.getSession();t?(console.log("Session verified, redirecting to main page..."),setTimeout(()=>{e.push((0,r.a)("/"))},1e3)):(console.error("Session not found after exchange"),n("Session verification failed"),setTimeout(()=>{e.push((0,r.a)("/login"))},3e3))}else console.error("No session in exchange response"),n("No session received from authentication"),setTimeout(()=>{e.push((0,r.a)("/login"))},3e3)}else{console.log("No OAuth code found, checking for existing session...");let{data:{session:n}}=await o.auth.getSession();n?(console.log("User already authenticated, redirecting to main page..."),setTimeout(()=>{e.push((0,r.a)("/"))},1e3)):(console.log("No session found, redirecting to login..."),setTimeout(()=>{e.push((0,r.a)("/login"))},2e3))}}catch(o){console.error("Unexpected error during auth callback:",o),n("An unexpected error occurred during authentication"),setTimeout(()=>{e.push((0,r.a)("/login"))},3e3)}finally{u(!1)}})()},[e]),(0,a.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-black",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:c?"Processing Authentication...":"Authentication Complete"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:c?"Please wait while we complete your sign-in.":o?"Redirecting to login...":"Redirecting to main page..."}),o&&(0,a.jsx)("div",{className:"text-red-400 bg-red-900/20 p-3 rounded-md border border-red-800 mb-4",children:o}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})]})})}},9585:(e,o,n)=>{Promise.resolve().then(n.bind(n,5650))}},e=>{e.O(0,[277,192,441,964,358],()=>e(e.s=9585)),_N_E=e.O()}]);