(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{1204:(e,a,o)=>{"use strict";o.d(a,{$W:()=>n,M3:()=>r,hV:()=>s});var t=o(9509);let n={supabase:{url:"https://yhxdyndkdhhnuginaekn.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InloeGR5bmRrZGhobnVnaW5hZWtuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3MTYxMTgsImV4cCI6MjA2NjI5MjExOH0.-3qFN_HEZx7i1rGhpaZg9edxoSRDgUkPzDYfrPNiIqI"},railway:{webhookUrl:t.env.NEXT_PUBLIC_RAILWAY_WEBHOOK_URL||"https://ffaiagent-n8n-production.up.railway.app/webhook/analyze-stocks"},alphaVantage:{apiKey:"UVJUR5P1SEQ00P2P",baseUrl:"https://www.alphavantage.co/query"},fmp:{apiKey:t.env.NEXT_PUBLIC_FMP_API_KEY||"",baseUrl:"https://financialmodelingprep.com/api/v3"},app:{url:window.location.origin,name:"Financial Feeling",description:"AI-powered financial analysis and trading insights",maxAssetsPerUser:Number(t.env.NEXT_PUBLIC_MAX_ASSETS_PER_USER||2),twelveDataApiKey:"4b4a29e7548d45caa547dea9a78e0157"},oauth:{redirectUrl:(()=>{{let e=window.location.origin;return"".concat(e).concat("","/auth/callback")}})(),redirectUrls:{development:"http://localhost:3000/auth/callback",production:"https://www.financialfeeling.com/auth/callback"}}};function r(){return n.oauth.redirectUrl}function s(){let e=n.supabase.url,a=n.supabase.anonKey,o=!e||"https://your-project.supabase.co"===e||e.includes("your-project"),t=!a||"your-anon-key"===a||a.includes("your-anon-key"),r=a&&3===a.split(".").length,s=a&&a.length>50,i=e&&a&&!o&&!t&&r&&s;return i||console.warn("⚠️ Supabase configuration validation failed:",{hasUrl:!!e,hasKey:!!a,isExampleUrl:o,isExampleKey:t,isValidJWTFormat:r,isValidLength:s}),{isValid:i,url:e,keyLength:a?a.length:0,isExampleUrl:o,isExampleKey:t,isValidJWTFormat:r,isValidLength:s,issues:{exampleUrl:o,exampleKey:t,invalidJWT:!r,invalidLength:!s}}}},1760:e=>{function a(e){var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}a.keys=()=>[],a.resolve=a,a.id=1760,e.exports=a},3999:(e,a,o)=>{"use strict";o.d(a,{a:()=>s,cn:()=>r});var t=o(2596),n=o(9688);function r(){for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];return(0,n.QP)((0,t.$)(a))}function s(e){let a=e.startsWith("/")?e.slice(1):e;return"www.financialfeeling.com"===window.location.hostname||window.location.hostname,"/".concat(a)}},5650:(e,a,o)=>{"use strict";o.r(a),o.d(a,{default:()=>c});var t=o(5155),n=o(2115),r=o(5695),s=o(2354),i=o(3999),l=o(1204);function c(){let e=(0,r.useRouter)(),[a,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{console.log("Auth callback page loaded"),console.log("Current URL:",window.location.href),console.log("URL search params:",window.location.search),(async()=>{try{let a=(0,s.UU)(l.$W.supabase.url,l.$W.supabase.anonKey,{auth:{flowType:"pkce",detectSessionInUrl:!0}});try{let e=Object.keys(window.localStorage).filter(e=>e.toLowerCase().includes("sb-")||e.toLowerCase().includes("supabase"));for(let a of(console.log("LocalStorage supabase-related keys:",e),e))console.log("localStorage[".concat(a,"] length:"),(window.localStorage.getItem(a)||"").length)}catch(e){console.warn("Unable to inspect localStorage:",e)}let t=new URLSearchParams(window.location.search),n=t.get("code"),r=t.get("error");if(r){console.error("OAuth error:",r),o("Authentication error: ".concat(r)),setTimeout(()=>{e.push((0,i.a)("/login"))},3e3);return}await new Promise(e=>setTimeout(e,200));let{data:{session:c}}=await a.auth.getSession();if(c){console.log("Session verified via detectSessionInUrl, redirecting to main page..."),setTimeout(()=>{e.push((0,i.a)("/"))},500);return}if(n){console.log("No session yet; attempting manual exchange as fallback");let{data:t,error:r}=await a.auth.exchangeCodeForSession(n);if(r){console.error("Error exchanging code for session:",r),o("Session error: ".concat(r.message)),setTimeout(()=>{e.push((0,i.a)("/login"))},3e3);return}if(t.session){console.log("Session created successfully after fallback exchange"),setTimeout(()=>{e.push((0,i.a)("/"))},500);return}}console.log("No OAuth code found or session still missing, redirecting to login..."),setTimeout(()=>{e.push((0,i.a)("/login"))},2e3)}catch(a){console.error("Unexpected error during auth callback:",a),o("An unexpected error occurred during authentication"),setTimeout(()=>{e.push((0,i.a)("/login"))},3e3)}finally{u(!1)}})()},[e]),(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-black",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:c?"Processing Authentication...":"Authentication Complete"}),(0,t.jsx)("p",{className:"text-gray-400 mb-4",children:c?"Please wait while we complete your sign-in.":a?"Redirecting to login...":"Redirecting to main page..."}),a&&(0,t.jsx)("div",{className:"text-red-400 bg-red-900/20 p-3 rounded-md border border-red-800 mb-4",children:a}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})})]})})}},9585:(e,a,o)=>{Promise.resolve().then(o.bind(o,5650))}},e=>{e.O(0,[277,192,441,964,358],()=>e(e.s=9585)),_N_E=e.O()}]);