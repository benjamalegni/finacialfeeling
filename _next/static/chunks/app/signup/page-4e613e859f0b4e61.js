(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{1168:(e,a,s)=>{Promise.resolve().then(s.bind(s,6038))},6038:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var r=s(5155),t=s(2115),o=s(5695),l=s(9982),i=s(7168),n=s(9852),c=s(6220),u=s(8482),d=s(1135),g=s(4416),h=s(8883),m=s(9099),p=s(3999),x=s(1204);function y(){let[e,a]=(0,t.useState)(""),[s,y]=(0,t.useState)(""),[b,v]=(0,t.useState)(null),[w,f]=(0,t.useState)(!1),j=(0,o.useRouter)(),N=x.$W.supabase.url,A=x.$W.supabase.anonKey,k=(0,l.kT)(N,A),C=async a=>{a.preventDefault(),f(!0),v(null);try{let a=(0,x.hV)();if(console.log("Supabase config validation:",a),!a.isValid){v("Configuration error: Supabase keys are not valid. Please contact the administrator."),f(!1);return}console.log("Attempting signup with email:",e);let{data:r,error:t}=await k.auth.signUp({email:e,password:s});if(console.log("Signup response:",{data:r,error:t}),t&&t.message.includes("Database error saving new user")){console.log("Database error detected, trying alternative signup method...");try{let{data:a,error:r}=await k.auth.signUp({email:e,password:s,options:{emailRedirectTo:void 0}});if(r){console.log("Alternative method also failed:",r);try{let{data:a,error:r}=await k.auth.signInWithPassword({email:e,password:s});if(a.user){console.log("User already exists and can sign in"),v("Account already exists! You can sign in with your credentials."),f(!1),setTimeout(()=>{j.push((0,p.a)("/login"))},2e3);return}}catch(e){console.log("User does not exist")}}else if(a.user){console.log("User created with alternative method"),v("Account created successfully! You can now sign in with your credentials."),f(!1),setTimeout(()=>{j.push((0,p.a)("/login"))},2e3);return}}catch(e){console.log("Alternative method failed:",e)}v("Account creation attempted. Please try signing in with your credentials."),f(!1),setTimeout(()=>{j.push((0,p.a)("/login"))},2e3);return}t?(console.error("Supabase signup error:",t),v("Signup error: ".concat(t.message)),f(!1)):r.user&&!r.user.email_confirmed_at?(v("Please check your email for a confirmation link to complete your registration."),f(!1)):r.user?(console.log("User created successfully:",r.user),console.log("User registration completed successfully"),j.push((0,p.a)("/"))):(v("Unexpected server response. Please try again."),f(!1))}catch(e){console.error("Signup error:",e),v("Unexpected error: ".concat(e instanceof Error?e.message:"Unknown error")),f(!1)}},U=async()=>{f(!0),v(null);let{error:e}=await k.auth.signInWithOAuth({provider:"github",options:{redirectTo:"https://benjamalegni.github.io/financialfeeling/auth/callback"}});e&&(v(e.message),f(!1))},S=async()=>{f(!0),v(null);try{let{data:e,error:a}=await k.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://benjamalegni.github.io/financialfeeling/auth/callback"}});a?(console.error("Google OAuth error:",a),a.message.includes("Provider not enabled")?v("Google sign-up is not configured. Please contact the administrator."):a.message.includes("Invalid redirect URI")?v("Configuration error: Invalid redirect URI. Please contact the administrator."):v("Google sign-up error: ".concat(a.message)),f(!1)):console.log("Google OAuth initiated successfully")}catch(e){console.error("Unexpected error during Google sign-up:",e),v("An unexpected error occurred. Please try again."),f(!1)}};return(0,r.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-black",children:(0,r.jsxs)(u.Zp,{className:"w-full max-w-md bg-gray-900 border-gray-700 relative",children:[(0,r.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{j.push((0,p.a)("/"))},className:"absolute top-2 right-2 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:(0,r.jsx)(g.A,{className:"h-5 w-5"})}),(0,r.jsxs)(u.aR,{className:"space-y-1",children:[(0,r.jsx)(u.ZB,{className:"text-2xl font-bold text-center text-white",children:"Create Account"}),(0,r.jsx)(u.BT,{className:"text-center text-gray-400",children:"Enter your details to create your account"})]}),(0,r.jsxs)(u.Wu,{className:"space-y-4",children:[(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"email",className:"text-white",children:"Email address"}),(0,r.jsx)(n.p,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>a(e.target.value),placeholder:"you@example.com",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"password",className:"text-white",children:"Password"}),(0,r.jsx)(n.p,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:s,onChange:e=>y(e.target.value),placeholder:"••••••••",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),b&&(0,r.jsx)("div",{className:"text-sm p-3 rounded-md border ".concat(b.includes("Check your email")?"text-green-400 bg-green-900/20 border-green-800":"text-red-400 bg-red-900/20 border-red-800"),children:b}),(0,r.jsx)(i.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:w,children:w?"Creating Account...":"Create Account"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)(d.w,{className:"w-full bg-gray-700"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-gray-900 px-2 text-gray-400",children:"Or continue with"})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(i.$,{variant:"outline",onClick:S,disabled:w,className:"w-full border-gray-600 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Sign Up with Google"]}),(0,r.jsxs)(i.$,{variant:"outline",onClick:U,disabled:w,className:"w-full border-gray-600 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors",children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Sign Up with GitHub"]})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Already have an account?"," ",(0,r.jsx)("a",{href:(0,p.a)("/login"),className:"font-medium text-blue-400 hover:text-blue-300 underline cursor-pointer",children:"Sign In"})]})]})]})})}}},e=>{e.O(0,[277,261,770,441,964,358],()=>e(e.s=1168)),_N_E=e.O()}]);