(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[879],{1265:(e,r,t)=>{Promise.resolve().then(t.bind(t,3778))},3778:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var s=t(5155),a=t(2115),o=t(5695),l=t(4983),i=t(7168),n=t(9852),c=t(6220),d=t(8482),u=t(1135),g=t(4416),h=t(8883);let m=(0,t(9946).A)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var p=t(3999),x=t(1204);function y(){let[e,r]=(0,a.useState)(""),[t,y]=(0,a.useState)(""),[v,b]=(0,a.useState)(null),[f,w]=(0,a.useState)(!1),N=(0,o.useRouter)(),j=async r=>{r.preventDefault(),w(!0),b(null);try{let r=(0,x.hV)();if(console.log("Supabase config validation:",r),!r.isValid){b("Configuration error: Supabase keys are not valid. Please contact the administrator."),w(!1);return}console.log("Attempting signup with email:",e);let{data:s,error:a}=await l.ND.auth.signUp({email:e,password:t,options:{emailRedirectTo:(0,x.M3)()}});if(console.log("Signup response:",{data:s,error:a}),a&&a.message.includes("Database error saving new user")){console.log("Database error detected, trying alternative signup method...");try{let{data:r,error:s}=await l.ND.auth.signUp({email:e,password:t,options:{emailRedirectTo:(0,x.M3)()}});if(s){console.log("Alternative method also failed:",s);try{let{data:r,error:s}=await l.ND.auth.signInWithPassword({email:e,password:t});if(r.user){console.log("User already exists and can sign in"),b("Account already exists! You can sign in with your credentials."),w(!1),setTimeout(()=>{N.push((0,p.a)("/login"))},2e3);return}}catch(e){console.log("User does not exist")}}else if(r.user){console.log("User created with alternative method"),b("Account created successfully! Please check your email for the verification link."),w(!1);return}}catch(e){console.log("Alternative method failed:",e)}b("Account creation attempted. Please try signing in with your credentials."),w(!1),setTimeout(()=>{N.push((0,p.a)("/login"))},2e3);return}a?(console.error("Supabase signup error:",a),b("Signup error: ".concat(a.message)),w(!1)):s.user&&!s.user.email_confirmed_at?(b("Please check your email for a confirmation link to complete your registration."),w(!1)):s.user?(console.log("User created successfully:",s.user),console.log("User registration completed successfully"),N.push((0,p.a)("/"))):(b("Unexpected server response. Please try again."),w(!1))}catch(e){console.error("Signup error:",e),b("Unexpected error: ".concat(e instanceof Error?e.message:"Unknown error")),w(!1)}},A=async()=>{w(!0),b(null);let e=(0,x.M3)();console.log("GitHub OAuth redirect URL:",e);let{error:r}=await l.ND.auth.signInWithOAuth({provider:"github",options:{redirectTo:e}});r&&(b(r.message),w(!1))},k=async()=>{w(!0),b(null);let e=(0,x.M3)();console.log("Google OAuth redirect URL:",e);try{let{data:r,error:t}=await l.ND.auth.signInWithOAuth({provider:"google",options:{redirectTo:e,queryParams:{access_type:"offline",prompt:"consent"}}});t?(console.error("Google OAuth error:",t),t.message.includes("Provider not enabled")?b("Google sign-up is not configured. Please contact the administrator."):t.message.includes("Invalid redirect URI")?b("Configuration error: Invalid redirect URI. Please contact the administrator."):b("Google sign-up error: ".concat(t.message)),w(!1)):(console.log("Google OAuth initiated successfully"),console.log("OAuth response:",r))}catch(e){console.error("Unexpected error during Google sign-up:",e),b("An unexpected error occurred. Please try again."),w(!1)}};return(0,s.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-black",children:(0,s.jsxs)(d.Zp,{className:"w-full max-w-md bg-gray-900 border-gray-700 relative",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>{N.push((0,p.a)("/"))},className:"absolute top-2 right-2 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors",children:(0,s.jsx)(g.A,{className:"h-5 w-5"})}),(0,s.jsxs)(d.aR,{className:"space-y-1",children:[(0,s.jsx)(d.ZB,{className:"text-2xl font-bold text-center text-white",children:"Create Account"}),(0,s.jsx)(d.BT,{className:"text-center text-gray-400",children:"Enter your details to create your account"})]}),(0,s.jsxs)(d.Wu,{className:"space-y-4",children:[(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"email",className:"text-white",children:"Email address"}),(0,s.jsx)(n.p,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>r(e.target.value),placeholder:"you@example.com",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.J,{htmlFor:"password",className:"text-white",children:"Password"}),(0,s.jsx)(n.p,{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:t,onChange:e=>y(e.target.value),placeholder:"••••••••",className:"bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),v&&(0,s.jsx)("div",{className:"text-sm p-3 rounded-md border ".concat(v.includes("Check your email")||v.toLowerCase().includes("verification email resent")?"text-green-400 bg-green-900/20 border-green-800":"text-red-400 bg-red-900/20 border-red-800"),children:v}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)(i.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:f,children:f?"Creating Account...":"Create Account"})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)(u.w,{className:"w-full bg-gray-700"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-gray-900 px-2 text-gray-400",children:"Or continue with"})})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)(i.$,{variant:"outline",onClick:k,disabled:f,className:"w-full border-gray-600 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors",children:[(0,s.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Sign Up with Google"]}),(0,s.jsxs)(i.$,{variant:"outline",onClick:A,disabled:f,className:"w-full border-gray-600 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors",children:[(0,s.jsx)(m,{className:"mr-2 h-4 w-4"}),"Sign Up with GitHub"]})]}),(0,s.jsxs)("div",{className:"text-center text-sm text-gray-400",children:["Already have an account?"," ",(0,s.jsx)("a",{href:(0,p.a)("/login"),className:"font-medium text-blue-400 hover:text-blue-300 underline cursor-pointer",children:"Sign In"})]})]})]})})}}},e=>{e.O(0,[277,192,771,441,964,358],()=>e(e.s=1265)),_N_E=e.O()}]);